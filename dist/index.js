!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cosDesign=t():e.cosDesign=t()}(self,(()=>(()=>{var e,t,r,n={451:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ALL_SUPPORTED_CHAIN_IDS:()=>v,CHAIN_IDS_TO_NAMES:()=>m,CHAIN_INFO:()=>y,SupportedChainId:()=>d,default:()=>E,getAddChainParameters:()=>w});var n=r(294),o=r(310),i=r(469);r(164);var a=["success","error","warning","info"],s=["Request Success!","Request failed, Please check the network or try again!"];var l={100:"Aggregator: only borrower or access ccount or admin",101:"Aggregator: only factory",102:"Aggregator: only borrower",103:"Aggregator: only access account",104:"Aggregator: only admin",501:"Aggregator: the share is too large or too small",502:"Aggregator: the rasing is over",503:"Aggregator: assets and amounts length mismatch",504:"Aggregator: the amount exceeds the maximum limit",505:"Aggregator: the raising is successful or not over yet",506:"Aggregator: caller did not deposit assets or not borrower",507:"Aggregator: the raising is failed or not over yet",508:"Aggregator: invalid erc721 address",509:"Aggregator: borrow period is finished",510:"Aggregator: the aggregator is over",511:"Aggregator: not distribution time",512:"Aggregator: invalid caller",513:"Aggregator: the borrow period is not over",514:"Aggregator: invalid token",515:"Aggregator: invalid spender",516:"Aggregator: protocol rate values should be inside the bounds",517:"Aggregator: the amount value should be in the required range",518:"Aggregator: the amount value should be in the required range",519:"Aggregator: the raising period is not over",520:"Aggregator: borrower can not be lender"};function c(){"#/"!==window.location.hash&&(alert("please connect first"),window.location.hash="")}var u,d,f=function(e){return"0x".concat(e.toString(16))},g=function(e){var t,r,n,o,c,u,d,f=JSON.parse(JSON.stringify(e));u=[1,1],d=function(e){var t,r=e.split(":");if(r.length>1){var n=r[1].trim();return null!==(t=l[n])&&void 0!==t?t:e}return e}(null!==(c=null!==(o=null!==(n=null!==(t=f.reason)&&void 0!==t?t:null===(r=f.data)||void 0===r?void 0:r.message)&&void 0!==n?n:f.message)&&void 0!==o?o:f.code)&&void 0!==c?c:f),void 0===u&&(u=[0,0]),void 0===d&&(d=""),i.Z.open({type:a[u[0]],message:s[u[1]],className:"customNotifi",description:d,placement:"topLeft"})};!function(e){e[e.MAINNET=1]="MAINNET",e[e.ROPSTEN=3]="ROPSTEN",e[e.RINKEBY=4]="RINKEBY",e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.ARBITRUM_ONE=42161]="ARBITRUM_ONE",e[e.ARBITRUM_RINKEBY=421611]="ARBITRUM_RINKEBY",e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISTIC_KOVAN=69]="OPTIMISTIC_KOVAN",e[e.POLYGON=137]="POLYGON",e[e.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI"}(d||(d={}));var h,p,m=((u={})[d.MAINNET]="mainnet",u[d.ROPSTEN]="ropsten",u[d.RINKEBY]="rinkeby",u[d.GOERLI]="goerli",u[d.KOVAN]="kovan",u[d.POLYGON]="polygon",u[d.POLYGON_MUMBAI]="polygon_mumbai",u[d.ARBITRUM_ONE]="arbitrum",u[d.ARBITRUM_RINKEBY]="arbitrum_rinkeby",u[d.OPTIMISM]="optimism",u[d.OPTIMISTIC_KOVAN]="optimistic_kovan",u),v=Object.values(d).filter((function(e){return"number"==typeof e})),b="023190592fbf472fade57c802b61c7b3",y=((h={})[d.MAINNET]={docs:"https://docs.uniswap.org/",explorer:"https://etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},urls:["https://mainnet.infura.io/v3/".concat(b),"https://eth-mainnet.alchemyapi.io/v2/".concat("_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC"),"https://cloudflare-eth.com"].filter((function(e){return void 0!==e}))},h[d.RINKEBY]={docs:"https://docs.uniswap.org/",explorer:"https://rinkeby.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Rinkeby",nativeCurrency:{name:"Rinkeby Ether",symbol:"rETH",decimals:18},urls:["https://rinkeby.infura.io/v3/".concat(b)].filter((function(e){return void 0!==e}))},h[d.ROPSTEN]={docs:"https://docs.uniswap.org/",explorer:"https://ropsten.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Ropsten",nativeCurrency:{name:"Ropsten Ether",symbol:"ropETH",decimals:18},urls:["https://ropsten.infura.io/v3/".concat(b)].filter((function(e){return void 0!==e}))},h[d.KOVAN]={docs:"https://docs.uniswap.org/",explorer:"https://kovan.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Kovan",nativeCurrency:{name:"Kovan Ether",symbol:"kovETH",decimals:18},urls:["https://kovan.infura.io/v3/".concat(b)].filter((function(e){return void 0!==e}))},h[d.GOERLI]={docs:"https://docs.uniswap.org/",explorer:"https://goerli.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Görli",nativeCurrency:{name:"Görli Ether",symbol:"görETH",decimals:18},urls:["https://goerli.infura.io/v3/".concat(b)].filter((function(e){return void 0!==e}))},h[d.POLYGON]={bridge:"https://wallet.polygon.technology/bridge",docs:"https://polygon.io/",explorer:"https://polygonscan.com/",infoLink:"https://info.uniswap.org/#/polygon/",label:"Polygon",nativeCurrency:{name:"Polygon Matic",symbol:"MATIC",decimals:18},urls:["https://polygon-mainnet.infura.io/v3/".concat(b),"https://polygon-rpc.com"].filter((function(e){return void 0!==e})),blockExplorerUrls:["https://polygonscan.com"]},h[d.POLYGON_MUMBAI]={bridge:"https://wallet.polygon.technology/bridge",docs:"https://polygon.io/",explorer:"https://mumbai.polygonscan.com/",infoLink:"https://info.uniswap.org/#/polygon/",label:"Polygon Mumbai",nativeCurrency:{name:"Polygon Mumbai Matic",symbol:"mMATIC",decimals:18},urls:["https://polygon-mumbai.infura.io/v3/".concat(b)].filter((function(e){return void 0!==e})),blockExplorerUrls:["https://mumbai.polygonscan.com"]},h),w=function(e){var t=y[e];return function(e){return!!e.nativeCurrency}(t)?{chainId:f(e),chainName:t.label,nativeCurrency:t.nativeCurrency,rpcUrls:t.urls,blockExplorerUrls:t.blockExplorerUrls}:e},O=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},A=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},I=(void 0!==window.ethereum?p=new o.Q(window.ethereum,"any"):(p=null,"h5"===process.env.platform?alert("Connect failed: Please install wallet first or please refresh the browser page"):alert("Connect failed: Please install wallet first.")),p),N=window.ethereum;const E=function(e){var t=this,r=e.supportedChainIds,o=(0,n.useState)(""),i=o[0],a=o[1],s=(0,n.useRef)(""),l=(0,n.useState)(!1),u=l[0],d=l[1],h=(0,n.useCallback)((function(){d(!0),a(""),c()}),[a]),p=(0,n.useCallback)((function(e){return O(t,void 0,void 0,(function(){var t,r;return A(this,(function(n){switch(n.label){case 0:return t=!0,[4,N._metamask.isUnlocked().then((function(e){t=e}))];case 1:if(n.sent(),t||alert("MetaMask is locked"),0===(null==e?void 0:e.length))a(""),window.localStorage.setItem("userAddress",""),c();else{if(a(e[0]),r=window.localStorage.getItem("userAddress"),!e[0])return[2];r?r!==e[0]&&(window.localStorage.setItem("userAddress",e[0]),a(e[0]),window.location.reload()):(window.localStorage.setItem("userAddress",e[0]),a(e[0]))}return[2]}}))}))}),[a]),m=(0,n.useCallback)((function(){return I?i?void 0:s.current?void(I?null==I||I.send("eth_requestAccounts",[]).then(p).catch((function(e){g(e)})):g("Connect failed: Please install wallet first.")):alert("please connect first or this chain hasn't been supported yet."):alert("please connect first")}),[p,i]),v=(0,n.useCallback)((function(e){r.includes(e)?(s.current=e,m()):(alert("This chain hasn't been supported yet."),s.current="",h())}),[h,m]),b=(0,n.useCallback)((function(e){return O(t,void 0,void 0,(function(){var t;return A(this,(function(r){switch(r.label){case 0:t=f(e),r.label=1;case 1:return r.trys.push([1,3,,8]),[4,N.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})];case 2:return r.sent(),[3,8];case 3:if(4902!==r.sent().code)return[3,7];r.label=4;case 4:return r.trys.push([4,6,,7]),[4,N.request({method:"wallet_addEthereumChain",params:[w(e)]})];case 5:case 6:return r.sent(),[3,7];case 7:return[3,8];case 8:return[2]}}))}))}),[]),y=(0,n.useCallback)((function(){I?I.getNetwork().then((function(e){var t=e.chainId,r=f(t);v(r)})).catch((function(e){g(e)})):g("Connect failed: Please install wallet first.")}),[v]);return(0,n.useEffect)((function(){I&&!u&&y()}),[u,y]),(0,n.useEffect)((function(){return void 0!==window.ethereum&&(window.ethereum.on("accountsChanged",p),window.ethereum.on("chainChanged",v)),function(){void 0!==window.ethereum&&(window.ethereum.removeListener("accountsChanged",p),window.ethereum.removeListener("chainChanged",v))}}),[p,v]),{address:i,setAddress:a,getAccount:m,logOut:h,handleSwitchChain:b}}},601:()=>{}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=n,i.amdO={},e=[],i.O=(t,r,n,o)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,n,o]=e[u],s=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var a={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(o,a),o},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[a,s,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)var u=l(i)}for(t&&t(r);c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},r=self.webpackChunkcosDesign=self.webpackChunkcosDesign||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=i.O(void 0,[284],(()=>i(451)));return i.O(a)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUFTSyxHQUNoQmQsRUFBb0J3QyxFQUFFZ0IsRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU96RCxFQUFvQlEsRUFBRTFGLElBRzFCaUosRUFBcUJyTCxLQUE0QixzQkFBSUEsS0FBNEIsdUJBQUssR0FDMUZxTCxFQUFtQnpCLFFBQVFvQixFQUFxQk0sS0FBSyxLQUFNLElBQzNERCxFQUFtQkUsS0FBT1AsRUFBcUJNLEtBQUssS0FBTUQsRUFBbUJFLEtBQUtELEtBQUtELEssR0M3Q3ZGLElBQUlHLEVBQXNCbEUsRUFBb0JRLE9BQUU1RCxFQUFXLENBQUMsTUFBTSxJQUFPb0QsRUFBb0IsTyxPQUN2RUEsRUFBb0JRLEVBQUUwRCxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29zRGVzaWduL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vY29zRGVzaWduLy4vc3JjL05vdGlmaWNhdGlvbi9Ob3RpZmljYXRpb24udHMiLCJ3ZWJwYWNrOi8vY29zRGVzaWduLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL2Nvc0Rlc2lnbi8uL3NyYy9jaGFpbnMudHMiLCJ3ZWJwYWNrOi8vY29zRGVzaWduLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vLi9zcmMvY2hhaW5JbmZvLnRzIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vd2VicGFjay9ydW50aW1lL2FtZCBvcHRpb25zIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL2Nvc0Rlc2lnbi93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9jb3NEZXNpZ24vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImNvc0Rlc2lnblwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJjb3NEZXNpZ25cIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mID8gKG9iaikgPT4gKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IChvYmopID0+IChvYmouX19wcm90b19fKTtcbnZhciBsZWFmUHJvdG90eXBlcztcbi8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLy8gbW9kZSAmIDE2OiByZXR1cm4gdmFsdWUgd2hlbiBpdCdzIFByb21pc2UtbGlrZVxuLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcblx0aWYobW9kZSAmIDEpIHZhbHVlID0gdGhpcyh2YWx1ZSk7XG5cdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG5cdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUpIHtcblx0XHRpZigobW9kZSAmIDQpICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcblx0XHRpZigobW9kZSAmIDE2KSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG5cdHZhciBkZWYgPSB7fTtcblx0bGVhZlByb3RvdHlwZXMgPSBsZWFmUHJvdG90eXBlcyB8fCBbbnVsbCwgZ2V0UHJvdG8oe30pLCBnZXRQcm90byhbXSksIGdldFByb3RvKGdldFByb3RvKV07XG5cdGZvcih2YXIgY3VycmVudCA9IG1vZGUgJiAyICYmIHZhbHVlOyB0eXBlb2YgY3VycmVudCA9PSAnb2JqZWN0JyAmJiAhfmxlYWZQcm90b3R5cGVzLmluZGV4T2YoY3VycmVudCk7IGN1cnJlbnQgPSBnZXRQcm90byhjdXJyZW50KSkge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1cnJlbnQpLmZvckVhY2goKGtleSkgPT4gKGRlZltrZXldID0gKCkgPT4gKHZhbHVlW2tleV0pKSk7XG5cdH1cblx0ZGVmWydkZWZhdWx0J10gPSAoKSA9PiAodmFsdWUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwiaW1wb3J0IHsgbm90aWZpY2F0aW9uIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBcImFudGQvZXMvbm90aWZpY2F0aW9uL3N0eWxlL2Nzc1wiO1xuaW1wb3J0IFwiLi9Ob3RpZmljYXRpb24ubGVzc1wiO1xuXG5jb25zdCBkZWZhdWx0SW5mbzogYW55ID0gW1wic3VjY2Vzc1wiLCBcImVycm9yXCIsIFwid2FybmluZ1wiLCBcImluZm9cIl07XG5jb25zdCBkZWZhdWx0TWVzc2FnZTogYW55ID0gW1xuICBcIlJlcXVlc3QgU3VjY2VzcyFcIixcbiAgXCJSZXF1ZXN0IGZhaWxlZCwgUGxlYXNlIGNoZWNrIHRoZSBuZXR3b3JrIG9yIHRyeSBhZ2FpbiFcIixcbl07XG5cbmNvbnN0IG9wZW5Ob3RpZmljYXRpb24gPSAodHlwZTogbnVtYmVyW10gPSBbMCwgMF0sIGRlc2NyaXB0aW9uID0gXCJcIikgPT4ge1xuICBub3RpZmljYXRpb24ub3Blbih7XG4gICAgdHlwZTogZGVmYXVsdEluZm9bdHlwZVswXV0sXG4gICAgbWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VbdHlwZVsxXV0sXG4gICAgY2xhc3NOYW1lOiBcImN1c3RvbU5vdGlmaVwiLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIHBsYWNlbWVudDogXCJ0b3BMZWZ0XCIsXG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgb3Blbk5vdGlmaWNhdGlvbjtcbiIsImltcG9ydCBvcGVuTm90aWZpY2F0aW9uIGZyb20gXCIuL05vdGlmaWNhdGlvbi9Ob3RpZmljYXRpb25cIjtcblxuY29uc3QgRXJyb3JNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFwiMTAwXCI6IFwiQWdncmVnYXRvcjogb25seSBib3Jyb3dlciBvciBhY2Nlc3MgY2NvdW50IG9yIGFkbWluXCIsXG4gIFwiMTAxXCI6IFwiQWdncmVnYXRvcjogb25seSBmYWN0b3J5XCIsXG4gIFwiMTAyXCI6IFwiQWdncmVnYXRvcjogb25seSBib3Jyb3dlclwiLFxuICBcIjEwM1wiOiBcIkFnZ3JlZ2F0b3I6IG9ubHkgYWNjZXNzIGFjY291bnRcIixcbiAgXCIxMDRcIjogXCJBZ2dyZWdhdG9yOiBvbmx5IGFkbWluXCIsXG4gIFwiNTAxXCI6IFwiQWdncmVnYXRvcjogdGhlIHNoYXJlIGlzIHRvbyBsYXJnZSBvciB0b28gc21hbGxcIixcbiAgXCI1MDJcIjogXCJBZ2dyZWdhdG9yOiB0aGUgcmFzaW5nIGlzIG92ZXJcIixcbiAgXCI1MDNcIjogXCJBZ2dyZWdhdG9yOiBhc3NldHMgYW5kIGFtb3VudHMgbGVuZ3RoIG1pc21hdGNoXCIsXG4gIFwiNTA0XCI6IFwiQWdncmVnYXRvcjogdGhlIGFtb3VudCBleGNlZWRzIHRoZSBtYXhpbXVtIGxpbWl0XCIsXG4gIFwiNTA1XCI6IFwiQWdncmVnYXRvcjogdGhlIHJhaXNpbmcgaXMgc3VjY2Vzc2Z1bCBvciBub3Qgb3ZlciB5ZXRcIixcbiAgXCI1MDZcIjogXCJBZ2dyZWdhdG9yOiBjYWxsZXIgZGlkIG5vdCBkZXBvc2l0IGFzc2V0cyBvciBub3QgYm9ycm93ZXJcIixcbiAgXCI1MDdcIjogXCJBZ2dyZWdhdG9yOiB0aGUgcmFpc2luZyBpcyBmYWlsZWQgb3Igbm90IG92ZXIgeWV0XCIsXG4gIFwiNTA4XCI6IFwiQWdncmVnYXRvcjogaW52YWxpZCBlcmM3MjEgYWRkcmVzc1wiLFxuICBcIjUwOVwiOiBcIkFnZ3JlZ2F0b3I6IGJvcnJvdyBwZXJpb2QgaXMgZmluaXNoZWRcIixcbiAgXCI1MTBcIjogXCJBZ2dyZWdhdG9yOiB0aGUgYWdncmVnYXRvciBpcyBvdmVyXCIsXG4gIFwiNTExXCI6IFwiQWdncmVnYXRvcjogbm90IGRpc3RyaWJ1dGlvbiB0aW1lXCIsXG4gIFwiNTEyXCI6IFwiQWdncmVnYXRvcjogaW52YWxpZCBjYWxsZXJcIixcbiAgXCI1MTNcIjogXCJBZ2dyZWdhdG9yOiB0aGUgYm9ycm93IHBlcmlvZCBpcyBub3Qgb3ZlclwiLFxuICBcIjUxNFwiOiBcIkFnZ3JlZ2F0b3I6IGludmFsaWQgdG9rZW5cIixcbiAgXCI1MTVcIjogXCJBZ2dyZWdhdG9yOiBpbnZhbGlkIHNwZW5kZXJcIixcbiAgXCI1MTZcIjogXCJBZ2dyZWdhdG9yOiBwcm90b2NvbCByYXRlIHZhbHVlcyBzaG91bGQgYmUgaW5zaWRlIHRoZSBib3VuZHNcIixcbiAgXCI1MTdcIjogXCJBZ2dyZWdhdG9yOiB0aGUgYW1vdW50IHZhbHVlIHNob3VsZCBiZSBpbiB0aGUgcmVxdWlyZWQgcmFuZ2VcIixcbiAgXCI1MThcIjogXCJBZ2dyZWdhdG9yOiB0aGUgYW1vdW50IHZhbHVlIHNob3VsZCBiZSBpbiB0aGUgcmVxdWlyZWQgcmFuZ2VcIixcbiAgXCI1MTlcIjogXCJBZ2dyZWdhdG9yOiB0aGUgcmFpc2luZyBwZXJpb2QgaXMgbm90IG92ZXJcIixcbiAgXCI1MjBcIjogXCJBZ2dyZWdhdG9yOiBib3Jyb3dlciBjYW4gbm90IGJlIGxlbmRlclwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvdG1hdEVycm9yTXNnKGVycjogc3RyaW5nKSB7XG4gIGNvbnN0IGVyckluZm8gPSBlcnIuc3BsaXQoXCI6XCIpO1xuICBpZiAoZXJySW5mby5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgY29kZSA9IGVyckluZm9bMV0udHJpbSgpO1xuXG4gICAgcmV0dXJuIEVycm9yTWFwW2NvZGVdID8/IGVycjtcbiAgfVxuICByZXR1cm4gZXJyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9Ib21lKCkge1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggIT09IFwiIy9cIikge1xuICAgIGFsZXJ0KFwicGxlYXNlIGNvbm5lY3QgZmlyc3RcIik7XG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBkZWNpbWFsVG9IZXggPSAoZGVjaW1hbCkgPT4ge1xuICByZXR1cm4gYDB4JHtkZWNpbWFsLnRvU3RyaW5nKDE2KX1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGVycm9yRnVuY3Rpb24gPSAoZXJyKSA9PiB7XG4gIGxldCBlcnJvciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgZXJyb3IpO1xuICB9XG4gIG9wZW5Ob3RpZmljYXRpb24oXG4gICAgWzEsIDFdLFxuICAgIGZvdG1hdEVycm9yTXNnKFxuICAgICAgZXJyb3IucmVhc29uID8/XG4gICAgICAgIGVycm9yLmRhdGE/Lm1lc3NhZ2UgPz9cbiAgICAgICAgZXJyb3IubWVzc2FnZSA/P1xuICAgICAgICBlcnJvci5jb2RlID8/XG4gICAgICAgIGVycm9yXG4gICAgKVxuICApO1xufTtcbiIsImV4cG9ydCBlbnVtIFN1cHBvcnRlZENoYWluSWQge1xuICBNQUlOTkVUID0gMSxcbiAgUk9QU1RFTiA9IDMsXG4gIFJJTktFQlkgPSA0LFxuICBHT0VSTEkgPSA1LFxuICBLT1ZBTiA9IDQyLFxuXG4gIEFSQklUUlVNX09ORSA9IDQyMTYxLFxuICBBUkJJVFJVTV9SSU5LRUJZID0gNDIxNjExLFxuXG4gIE9QVElNSVNNID0gMTAsXG4gIE9QVElNSVNUSUNfS09WQU4gPSA2OSxcblxuICBQT0xZR09OID0gMTM3LFxuICBQT0xZR09OX01VTUJBSSA9IDgwMDAxLFxufVxuXG5leHBvcnQgY29uc3QgQ0hBSU5fSURTX1RPX05BTUVTID0ge1xuICBbU3VwcG9ydGVkQ2hhaW5JZC5NQUlOTkVUXTogXCJtYWlubmV0XCIsXG4gIFtTdXBwb3J0ZWRDaGFpbklkLlJPUFNURU5dOiBcInJvcHN0ZW5cIixcbiAgW1N1cHBvcnRlZENoYWluSWQuUklOS0VCWV06IFwicmlua2VieVwiLFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5HT0VSTEldOiBcImdvZXJsaVwiLFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5LT1ZBTl06IFwia292YW5cIixcbiAgW1N1cHBvcnRlZENoYWluSWQuUE9MWUdPTl06IFwicG9seWdvblwiLFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5QT0xZR09OX01VTUJBSV06IFwicG9seWdvbl9tdW1iYWlcIixcbiAgW1N1cHBvcnRlZENoYWluSWQuQVJCSVRSVU1fT05FXTogXCJhcmJpdHJ1bVwiLFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5BUkJJVFJVTV9SSU5LRUJZXTogXCJhcmJpdHJ1bV9yaW5rZWJ5XCIsXG4gIFtTdXBwb3J0ZWRDaGFpbklkLk9QVElNSVNNXTogXCJvcHRpbWlzbVwiLFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5PUFRJTUlTVElDX0tPVkFOXTogXCJvcHRpbWlzdGljX2tvdmFuXCIsXG59O1xuXG4vKipcbiAqIEFycmF5IG9mIGFsbCB0aGUgc3VwcG9ydGVkIGNoYWluIElEc1xuICovXG5leHBvcnQgY29uc3QgQUxMX1NVUFBPUlRFRF9DSEFJTl9JRFM6IFN1cHBvcnRlZENoYWluSWRbXSA9IE9iamVjdC52YWx1ZXMoXG4gIFN1cHBvcnRlZENoYWluSWRcbikuZmlsdGVyKChpZCkgPT4gdHlwZW9mIGlkID09PSBcIm51bWJlclwiKSBhcyBTdXBwb3J0ZWRDaGFpbklkW107XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBldGhlcnMgZnJvbSBcImV0aGVyc1wiO1xuaW1wb3J0IHsgZXJyb3JGdW5jdGlvbiwgdG9Ib21lIH0gZnJvbSBcIi4vdXRpbHNcIjtcbi8vIGltcG9ydCB7IHVzZVdoeURpZFlvdVVwZGF0ZSB9IGZyb20gXCJhaG9va3NcIjtcbmltcG9ydCB7IGdldEFkZENoYWluUGFyYW1ldGVycyB9IGZyb20gXCIuL2NoYWluSW5mb1wiO1xuaW1wb3J0IHsgZGVjaW1hbFRvSGV4IH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vY2hhaW5JbmZvXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jaGFpbnNcIjtcblxuY29uc3QgcHJvdmlkZXIgPSAoZnVuY3Rpb24gKCkge1xuICBsZXQgcmVzdWx0OiBldGhlcnMuZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXI7XG4gIGlmICh0eXBlb2Ygd2luZG93LmV0aGVyZXVtICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmVzdWx0ID0gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHdpbmRvdy5ldGhlcmV1bSwgXCJhbnlcIik7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gbnVsbDtcbiAgICBpZiAocHJvY2Vzcy5lbnYucGxhdGZvcm0gPT09IFwiaDVcIikge1xuICAgICAgYWxlcnQoXG4gICAgICAgIFwiQ29ubmVjdCBmYWlsZWQ6IFBsZWFzZSBpbnN0YWxsIHdhbGxldCBmaXJzdCBvciBwbGVhc2UgcmVmcmVzaCB0aGUgYnJvd3NlciBwYWdlXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiQ29ubmVjdCBmYWlsZWQ6IFBsZWFzZSBpbnN0YWxsIHdhbGxldCBmaXJzdC5cIik7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59KSgpO1xuXG5jb25zdCB7IGV0aGVyZXVtIH0gPSB3aW5kb3c7XG5cbmludGVyZmFjZSB1c2VXYWxsZXRUeXBlIHtcbiAgYWRkcmVzczogc3RyaW5nO1xuICBzZXRBZGRyZXNzOiAoYWRkcmVzczogc3RyaW5nKSA9PiB2b2lkO1xuICBnZXRBY2NvdW50OiAoKSA9PiB2b2lkO1xuICBsb2dPdXQ6ICgpID0+IHZvaWQ7XG4gIGhhbmRsZVN3aXRjaENoYWluOiAoY2hhaW5JZDogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgdXNlV2FsbGV0UHJvcHMge1xuICBzdXBwb3J0ZWRDaGFpbklkczogbnVtYmVyW107XG59XG5cbmZ1bmN0aW9uIHVzZVdhbGxldCh7IHN1cHBvcnRlZENoYWluSWRzIH06IHVzZVdhbGxldFByb3BzKTogdXNlV2FsbGV0VHlwZSB7XG4gIGNvbnN0IFthZGRyZXNzLCBzZXRBZGRyZXNzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBjaGFpbiA9IHVzZVJlZihcIlwiKTtcbiAgLy8gY29uc3QgW3Byb3ZpZGVyLCBzZXRwcm92aWRlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzTG9nb3V0LCBzZXRpc0xvZ291dF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gdXNlV2h5RGlkWW91VXBkYXRlKFwidXNlV2FsbGV0XCIsIHsgcHJvdmlkZXIsIGFkZHJlc3MgfSk7XG5cbiAgY29uc3QgbG9nT3V0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldGlzTG9nb3V0KHRydWUpO1xuICAgIHNldEFkZHJlc3MoXCJcIik7XG4gICAgdG9Ib21lKCk7XG4gIH0sIFtzZXRBZGRyZXNzXSk7XG4gIGNvbnN0IGhhbmRsZUFjY291bnRzQ2hhbmdlZCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChhY2NvdW50czogYW55KSA9PiB7XG4gICAgICBsZXQgaXNVbmxvY2tlZCA9IHRydWU7XG4gICAgICBhd2FpdCBldGhlcmV1bS5fbWV0YW1hc2suaXNVbmxvY2tlZCgpLnRoZW4oKHJlc3VsdDogYm9vbGVhbikgPT4ge1xuICAgICAgICBpc1VubG9ja2VkID0gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICBpZiAoIWlzVW5sb2NrZWQpIHtcbiAgICAgICAgYWxlcnQoXCJNZXRhTWFzayBpcyBsb2NrZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoYWNjb3VudHM/Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXRBZGRyZXNzKFwiXCIpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyQWRkcmVzc1wiLCBcIlwiKTtcbiAgICAgICAgdG9Ib21lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDmo4DmtYvotKbmiLfliIfmjaLlkI7mm7TmlrDotKbmiLflnLDlnYBcbiAgICAgICAgc2V0QWRkcmVzcyhhY2NvdW50c1swXSk7XG4gICAgICAgIGNvbnN0IHVzZXJBZHJlc3MgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyQWRkcmVzc1wiKTtcbiAgICAgICAgaWYgKCFhY2NvdW50c1swXSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXVzZXJBZHJlc3MpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyQWRkcmVzc1wiLCBhY2NvdW50c1swXSk7XG4gICAgICAgICAgc2V0QWRkcmVzcyhhY2NvdW50c1swXSk7XG4gICAgICAgIH0gZWxzZSBpZiAodXNlckFkcmVzcyAhPT0gYWNjb3VudHNbMF0pIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyQWRkcmVzc1wiLCBhY2NvdW50c1swXSk7XG4gICAgICAgICAgc2V0QWRkcmVzcyhhY2NvdW50c1swXSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbc2V0QWRkcmVzc11cbiAgKTtcblxuICBjb25zdCBnZXRBY2NvdW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHJldHVybiBhbGVydChcInBsZWFzZSBjb25uZWN0IGZpcnN0XCIpO1xuICAgIH1cbiAgICBpZiAoYWRkcmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWNoYWluLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiBhbGVydChcbiAgICAgICAgXCJwbGVhc2UgY29ubmVjdCBmaXJzdCBvciB0aGlzIGNoYWluIGhhc24ndCBiZWVuIHN1cHBvcnRlZCB5ZXQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHByb3ZpZGVyXG4gICAgICA/IHByb3ZpZGVyXG4gICAgICAgICAgPy5zZW5kKFwiZXRoX3JlcXVlc3RBY2NvdW50c1wiLCBbXSlcbiAgICAgICAgICAudGhlbihoYW5kbGVBY2NvdW50c0NoYW5nZWQpXG4gICAgICAgICAgLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICAgICAgICBlcnJvckZ1bmN0aW9uKGVycm9yKTtcbiAgICAgICAgICB9KVxuICAgICAgOiBlcnJvckZ1bmN0aW9uKFwiQ29ubmVjdCBmYWlsZWQ6IFBsZWFzZSBpbnN0YWxsIHdhbGxldCBmaXJzdC5cIik7XG4gIH0sIFtoYW5kbGVBY2NvdW50c0NoYW5nZWQsIGFkZHJlc3NdKTtcblxuICBjb25zdCBoYW5kbGVDaGFpbkNoYW5nZWQgPSB1c2VDYWxsYmFjayhcbiAgICAoY2hhaW5JZDogYW55KSA9PiB7XG4gICAgICBpZiAoc3VwcG9ydGVkQ2hhaW5JZHMuaW5jbHVkZXMoY2hhaW5JZCkpIHtcbiAgICAgICAgY2hhaW4uY3VycmVudCA9IGNoYWluSWQ7XG4gICAgICAgIGdldEFjY291bnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiVGhpcyBjaGFpbiBoYXNuJ3QgYmVlbiBzdXBwb3J0ZWQgeWV0LlwiKTtcbiAgICAgICAgY2hhaW4uY3VycmVudCA9IFwiXCI7XG4gICAgICAgIGxvZ091dCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2xvZ091dCwgZ2V0QWNjb3VudF1cbiAgKTtcblxuICBjb25zdCBoYW5kbGVTd2l0Y2hDaGFpbiA9IHVzZUNhbGxiYWNrKGFzeW5jIChjaGFpbklkOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBIZXhTdHJpbmcgPSBkZWNpbWFsVG9IZXgoY2hhaW5JZCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6IFwid2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW5cIixcbiAgICAgICAgcGFyYW1zOiBbeyBjaGFpbklkOiBIZXhTdHJpbmcgfV0sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChzd2l0Y2hFcnJvcikge1xuICAgICAgLy8gVGhpcyBlcnJvciBjb2RlIGluZGljYXRlcyB0aGF0IHRoZSBjaGFpbiBoYXMgbm90IGJlZW4gYWRkZWQgdG8gTWV0YU1hc2suXG4gICAgICBpZiAoc3dpdGNoRXJyb3IuY29kZSA9PT0gNDkwMikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiBcIndhbGxldF9hZGRFdGhlcmV1bUNoYWluXCIsXG4gICAgICAgICAgICBwYXJhbXM6IFtnZXRBZGRDaGFpblBhcmFtZXRlcnMoY2hhaW5JZCldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChhZGRFcnJvcikge1xuICAgICAgICAgIC8vIGhhbmRsZSBcImFkZFwiIGVycm9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBnZXRDaGFpbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBwcm92aWRlclxuICAgICAgPyBwcm92aWRlclxuICAgICAgICAgIC5nZXROZXR3b3JrKClcbiAgICAgICAgICAudGhlbigoeyBjaGFpbklkIH06IHsgY2hhaW5JZDogYW55IH0pID0+IHtcbiAgICAgICAgICAgIC8vIOWwhuWNgei/m+WItue7k+aenOi9rOaNouS4uuWNgeWFrei/m+WItuWtl+espuS4slxuICAgICAgICAgICAgY29uc3QgcmVzdWx0XyA9IGRlY2ltYWxUb0hleChjaGFpbklkKTtcbiAgICAgICAgICAgIGhhbmRsZUNoYWluQ2hhbmdlZChyZXN1bHRfKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgICAgICAgZXJyb3JGdW5jdGlvbihlcnJvcik7XG4gICAgICAgICAgfSlcbiAgICAgIDogZXJyb3JGdW5jdGlvbihcIkNvbm5lY3QgZmFpbGVkOiBQbGVhc2UgaW5zdGFsbCB3YWxsZXQgZmlyc3QuXCIpO1xuICB9LCBbaGFuZGxlQ2hhaW5DaGFuZ2VkXSk7XG5cbiAgLy8g5qOA5rWL55So5oi35piv5ZCm6ZSB5a6a5LqG6LSm5oi3XG5cbiAgLy8g6I635Y+W6LSm5oi35Zyw5Z2AIChldGhlcnMpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvdmlkZXIgJiYgIWlzTG9nb3V0KSB7XG4gICAgICBnZXRDaGFpbigpO1xuICAgIH1cbiAgfSwgW2lzTG9nb3V0LCBnZXRDaGFpbl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuZXRoZXJldW0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbihcImFjY291bnRzQ2hhbmdlZFwiLCBoYW5kbGVBY2NvdW50c0NoYW5nZWQpO1xuICAgICAgd2luZG93LmV0aGVyZXVtLm9uKFwiY2hhaW5DaGFuZ2VkXCIsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdy5ldGhlcmV1bSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB3aW5kb3cuZXRoZXJldW0ucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgXCJhY2NvdW50c0NoYW5nZWRcIixcbiAgICAgICAgICBoYW5kbGVBY2NvdW50c0NoYW5nZWRcbiAgICAgICAgKTtcbiAgICAgICAgd2luZG93LmV0aGVyZXVtLnJlbW92ZUxpc3RlbmVyKFwiY2hhaW5DaGFuZ2VkXCIsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2hhbmRsZUFjY291bnRzQ2hhbmdlZCwgaGFuZGxlQ2hhaW5DaGFuZ2VkXSk7XG5cbiAgcmV0dXJuIHsgYWRkcmVzcywgc2V0QWRkcmVzcywgZ2V0QWNjb3VudCwgbG9nT3V0LCBoYW5kbGVTd2l0Y2hDaGFpbiB9O1xufVxuZXhwb3J0IGRlZmF1bHQgdXNlV2FsbGV0O1xuIiwiaW1wb3J0IHsgZGVjaW1hbFRvSGV4IH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IFN1cHBvcnRlZENoYWluSWQgfSBmcm9tIFwiLi9jaGFpbnNcIjtcblxuY29uc3QgaW5mdXJhS2V5ID0gXCIwMjMxOTA1OTJmYmY0NzJmYWRlNTdjODAyYjYxYzdiM1wiO1xuY29uc3QgYWxjaGVteUtleSA9IFwiX2dnN3dTU2kwS01Cc2RLbkdWZkhEdWVxNnhNQjlFa0NcIjtcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUNoYWluSW5mbyB7XG4gIHJlYWRvbmx5IGJsb2NrV2FpdE1zQmVmb3JlV2FybmluZz86IG51bWJlcjtcbiAgcmVhZG9ubHkgZG9jczogc3RyaW5nO1xuICByZWFkb25seSBicmlkZ2U/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGV4cGxvcmVyOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGluZm9MaW5rOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGxvZ29Vcmw/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGhlbHBDZW50ZXJVcmw/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IG5hdGl2ZUN1cnJlbmN5OiB7XG4gICAgbmFtZTogc3RyaW5nOyAvLyBlLmcuICdHb2VybGkgRVRIJyxcbiAgICBzeW1ib2w6IHN0cmluZzsgLy8gZS5nLiAnZ29yRVRIJyxcbiAgICBkZWNpbWFsczogbnVtYmVyOyAvLyBlLmcuIDE4LFxuICB9O1xuICByZWFkb25seSB1cmxzOiBBcnJheTxzdHJpbmcgfCB1bmRlZmluZWQ+O1xuICByZWFkb25seSBibG9ja0V4cGxvcmVyVXJscz86IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYWluSW5mb01hcCB7XG4gIHJlYWRvbmx5IFtjaGFpbklkOiBudW1iZXJdOiBCYXNlQ2hhaW5JbmZvO1xufVxuXG5leHBvcnQgY29uc3QgQ0hBSU5fSU5GTzogQ2hhaW5JbmZvTWFwID0ge1xuICBbU3VwcG9ydGVkQ2hhaW5JZC5NQUlOTkVUXToge1xuICAgIGRvY3M6IFwiaHR0cHM6Ly9kb2NzLnVuaXN3YXAub3JnL1wiLFxuICAgIGV4cGxvcmVyOiBcImh0dHBzOi8vZXRoZXJzY2FuLmlvL1wiLFxuICAgIGluZm9MaW5rOiBcImh0dHBzOi8vaW5mby51bmlzd2FwLm9yZy8jL1wiLFxuICAgIGxhYmVsOiBcIkV0aGVyZXVtXCIsXG4gICAgbmF0aXZlQ3VycmVuY3k6IHsgbmFtZTogXCJFdGhlclwiLCBzeW1ib2w6IFwiRVRIXCIsIGRlY2ltYWxzOiAxOCB9LFxuICAgIHVybHM6IFtcbiAgICAgIGluZnVyYUtleSA/IGBodHRwczovL21haW5uZXQuaW5mdXJhLmlvL3YzLyR7aW5mdXJhS2V5fWAgOiB1bmRlZmluZWQsXG4gICAgICBhbGNoZW15S2V5XG4gICAgICAgID8gYGh0dHBzOi8vZXRoLW1haW5uZXQuYWxjaGVteWFwaS5pby92Mi8ke2FsY2hlbXlLZXl9YFxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIFwiaHR0cHM6Ly9jbG91ZGZsYXJlLWV0aC5jb21cIixcbiAgICBdLmZpbHRlcigodXJsKSA9PiB1cmwgIT09IHVuZGVmaW5lZCksXG4gIH0sXG4gIFtTdXBwb3J0ZWRDaGFpbklkLlJJTktFQlldOiB7XG4gICAgZG9jczogXCJodHRwczovL2RvY3MudW5pc3dhcC5vcmcvXCIsXG4gICAgZXhwbG9yZXI6IFwiaHR0cHM6Ly9yaW5rZWJ5LmV0aGVyc2Nhbi5pby9cIixcbiAgICBpbmZvTGluazogXCJodHRwczovL2luZm8udW5pc3dhcC5vcmcvIy9cIixcbiAgICBsYWJlbDogXCJSaW5rZWJ5XCIsXG4gICAgbmF0aXZlQ3VycmVuY3k6IHsgbmFtZTogXCJSaW5rZWJ5IEV0aGVyXCIsIHN5bWJvbDogXCJyRVRIXCIsIGRlY2ltYWxzOiAxOCB9LFxuICAgIHVybHM6IFtcbiAgICAgIGluZnVyYUtleSA/IGBodHRwczovL3JpbmtlYnkuaW5mdXJhLmlvL3YzLyR7aW5mdXJhS2V5fWAgOiB1bmRlZmluZWQsXG4gICAgXS5maWx0ZXIoKHVybCkgPT4gdXJsICE9PSB1bmRlZmluZWQpLFxuICB9LFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5ST1BTVEVOXToge1xuICAgIGRvY3M6IFwiaHR0cHM6Ly9kb2NzLnVuaXN3YXAub3JnL1wiLFxuICAgIGV4cGxvcmVyOiBcImh0dHBzOi8vcm9wc3Rlbi5ldGhlcnNjYW4uaW8vXCIsXG4gICAgaW5mb0xpbms6IFwiaHR0cHM6Ly9pbmZvLnVuaXN3YXAub3JnLyMvXCIsXG4gICAgbGFiZWw6IFwiUm9wc3RlblwiLFxuICAgIG5hdGl2ZUN1cnJlbmN5OiB7IG5hbWU6IFwiUm9wc3RlbiBFdGhlclwiLCBzeW1ib2w6IFwicm9wRVRIXCIsIGRlY2ltYWxzOiAxOCB9LFxuICAgIHVybHM6IFtcbiAgICAgIGluZnVyYUtleSA/IGBodHRwczovL3JvcHN0ZW4uaW5mdXJhLmlvL3YzLyR7aW5mdXJhS2V5fWAgOiB1bmRlZmluZWQsXG4gICAgXS5maWx0ZXIoKHVybCkgPT4gdXJsICE9PSB1bmRlZmluZWQpLFxuICB9LFxuICBbU3VwcG9ydGVkQ2hhaW5JZC5LT1ZBTl06IHtcbiAgICBkb2NzOiBcImh0dHBzOi8vZG9jcy51bmlzd2FwLm9yZy9cIixcbiAgICBleHBsb3JlcjogXCJodHRwczovL2tvdmFuLmV0aGVyc2Nhbi5pby9cIixcbiAgICBpbmZvTGluazogXCJodHRwczovL2luZm8udW5pc3dhcC5vcmcvIy9cIixcbiAgICBsYWJlbDogXCJLb3ZhblwiLFxuICAgIG5hdGl2ZUN1cnJlbmN5OiB7IG5hbWU6IFwiS292YW4gRXRoZXJcIiwgc3ltYm9sOiBcImtvdkVUSFwiLCBkZWNpbWFsczogMTggfSxcbiAgICB1cmxzOiBbXG4gICAgICBpbmZ1cmFLZXkgPyBgaHR0cHM6Ly9rb3Zhbi5pbmZ1cmEuaW8vdjMvJHtpbmZ1cmFLZXl9YCA6IHVuZGVmaW5lZCxcbiAgICBdLmZpbHRlcigodXJsKSA9PiB1cmwgIT09IHVuZGVmaW5lZCksXG4gIH0sXG4gIFtTdXBwb3J0ZWRDaGFpbklkLkdPRVJMSV06IHtcbiAgICBkb2NzOiBcImh0dHBzOi8vZG9jcy51bmlzd2FwLm9yZy9cIixcbiAgICBleHBsb3JlcjogXCJodHRwczovL2dvZXJsaS5ldGhlcnNjYW4uaW8vXCIsXG4gICAgaW5mb0xpbms6IFwiaHR0cHM6Ly9pbmZvLnVuaXN3YXAub3JnLyMvXCIsXG4gICAgbGFiZWw6IFwiR8O2cmxpXCIsXG4gICAgbmF0aXZlQ3VycmVuY3k6IHsgbmFtZTogXCJHw7ZybGkgRXRoZXJcIiwgc3ltYm9sOiBcImfDtnJFVEhcIiwgZGVjaW1hbHM6IDE4IH0sXG4gICAgdXJsczogW1xuICAgICAgaW5mdXJhS2V5ID8gYGh0dHBzOi8vZ29lcmxpLmluZnVyYS5pby92My8ke2luZnVyYUtleX1gIDogdW5kZWZpbmVkLFxuICAgIF0uZmlsdGVyKCh1cmwpID0+IHVybCAhPT0gdW5kZWZpbmVkKSxcbiAgfSxcbiAgW1N1cHBvcnRlZENoYWluSWQuUE9MWUdPTl06IHtcbiAgICBicmlkZ2U6IFwiaHR0cHM6Ly93YWxsZXQucG9seWdvbi50ZWNobm9sb2d5L2JyaWRnZVwiLFxuICAgIGRvY3M6IFwiaHR0cHM6Ly9wb2x5Z29uLmlvL1wiLFxuICAgIGV4cGxvcmVyOiBcImh0dHBzOi8vcG9seWdvbnNjYW4uY29tL1wiLFxuICAgIGluZm9MaW5rOiBcImh0dHBzOi8vaW5mby51bmlzd2FwLm9yZy8jL3BvbHlnb24vXCIsXG4gICAgbGFiZWw6IFwiUG9seWdvblwiLFxuICAgIG5hdGl2ZUN1cnJlbmN5OiB7IG5hbWU6IFwiUG9seWdvbiBNYXRpY1wiLCBzeW1ib2w6IFwiTUFUSUNcIiwgZGVjaW1hbHM6IDE4IH0sXG4gICAgdXJsczogW1xuICAgICAgaW5mdXJhS2V5XG4gICAgICAgID8gYGh0dHBzOi8vcG9seWdvbi1tYWlubmV0LmluZnVyYS5pby92My8ke2luZnVyYUtleX1gXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgXCJodHRwczovL3BvbHlnb24tcnBjLmNvbVwiLFxuICAgIF0uZmlsdGVyKCh1cmwpID0+IHVybCAhPT0gdW5kZWZpbmVkKSxcbiAgICBibG9ja0V4cGxvcmVyVXJsczogW1wiaHR0cHM6Ly9wb2x5Z29uc2Nhbi5jb21cIl0sXG4gIH0sXG4gIFtTdXBwb3J0ZWRDaGFpbklkLlBPTFlHT05fTVVNQkFJXToge1xuICAgIGJyaWRnZTogXCJodHRwczovL3dhbGxldC5wb2x5Z29uLnRlY2hub2xvZ3kvYnJpZGdlXCIsXG4gICAgZG9jczogXCJodHRwczovL3BvbHlnb24uaW8vXCIsXG4gICAgZXhwbG9yZXI6IFwiaHR0cHM6Ly9tdW1iYWkucG9seWdvbnNjYW4uY29tL1wiLFxuICAgIGluZm9MaW5rOiBcImh0dHBzOi8vaW5mby51bmlzd2FwLm9yZy8jL3BvbHlnb24vXCIsXG4gICAgbGFiZWw6IFwiUG9seWdvbiBNdW1iYWlcIixcbiAgICBuYXRpdmVDdXJyZW5jeToge1xuICAgICAgbmFtZTogXCJQb2x5Z29uIE11bWJhaSBNYXRpY1wiLFxuICAgICAgc3ltYm9sOiBcIm1NQVRJQ1wiLFxuICAgICAgZGVjaW1hbHM6IDE4LFxuICAgIH0sXG4gICAgdXJsczogW1xuICAgICAgaW5mdXJhS2V5XG4gICAgICAgID8gYGh0dHBzOi8vcG9seWdvbi1tdW1iYWkuaW5mdXJhLmlvL3YzLyR7aW5mdXJhS2V5fWBcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgXS5maWx0ZXIoKHVybCkgPT4gdXJsICE9PSB1bmRlZmluZWQpLFxuICAgIGJsb2NrRXhwbG9yZXJVcmxzOiBbXCJodHRwczovL211bWJhaS5wb2x5Z29uc2Nhbi5jb21cIl0sXG4gIH0sXG59O1xuXG5mdW5jdGlvbiBpc0V4dGVuZGVkQ2hhaW5JbmZvcm1hdGlvbihjaGFpbkluZm9ybWF0aW9uOiBCYXNlQ2hhaW5JbmZvKSB7XG4gIHJldHVybiAhIWNoYWluSW5mb3JtYXRpb24ubmF0aXZlQ3VycmVuY3k7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRBZGRDaGFpblBhcmFtZXRlcnMgPSAoY2hhaW5JZDogYW55KSA9PiB7XG4gIGNvbnN0IGNoYWluSW5mb3JtYXRpb24gPSBDSEFJTl9JTkZPW2NoYWluSWRdO1xuICBpZiAoaXNFeHRlbmRlZENoYWluSW5mb3JtYXRpb24oY2hhaW5JbmZvcm1hdGlvbikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW5JZDogZGVjaW1hbFRvSGV4KGNoYWluSWQpLFxuICAgICAgY2hhaW5OYW1lOiBjaGFpbkluZm9ybWF0aW9uLmxhYmVsLFxuICAgICAgbmF0aXZlQ3VycmVuY3k6IGNoYWluSW5mb3JtYXRpb24ubmF0aXZlQ3VycmVuY3ksXG4gICAgICBycGNVcmxzOiBjaGFpbkluZm9ybWF0aW9uLnVybHMsXG4gICAgICBibG9ja0V4cGxvcmVyVXJsczogY2hhaW5JbmZvcm1hdGlvbi5ibG9ja0V4cGxvcmVyVXJscyxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjaGFpbklkO1xuICB9XG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uYW1kTyA9IHt9OyIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ4MjY6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2Nvc0Rlc2lnblwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtjb3NEZXNpZ25cIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFsyODRdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg0NTEpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsImRlZmVycmVkIiwibGVhZlByb3RvdHlwZXMiLCJnZXRQcm90byIsImRlZmF1bHRJbmZvIiwiZGVmYXVsdE1lc3NhZ2UiLCJFcnJvck1hcCIsInRvSG9tZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsImFsZXJ0IiwiU3VwcG9ydGVkQ2hhaW5JZCIsImRlY2ltYWxUb0hleCIsImRlY2ltYWwiLCJ0b1N0cmluZyIsImVycm9yRnVuY3Rpb24iLCJlcnIiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJlcnJvciIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImVyckluZm8iLCJzcGxpdCIsImxlbmd0aCIsImNvZGUiLCJ0cmltIiwiZm90bWF0RXJyb3JNc2ciLCJyZWFzb24iLCJkYXRhIiwibWVzc2FnZSIsIm5vdGlmaWNhdGlvbiIsImNsYXNzTmFtZSIsInBsYWNlbWVudCIsInJlc3VsdCIsIkNIQUlOX0lEU19UT19OQU1FUyIsIk1BSU5ORVQiLCJST1BTVEVOIiwiUklOS0VCWSIsIkdPRVJMSSIsIktPVkFOIiwiUE9MWUdPTiIsIlBPTFlHT05fTVVNQkFJIiwiQVJCSVRSVU1fT05FIiwiQVJCSVRSVU1fUklOS0VCWSIsIk9QVElNSVNNIiwiT1BUSU1JU1RJQ19LT1ZBTiIsIkFMTF9TVVBQT1JURURfQ0hBSU5fSURTIiwiT2JqZWN0IiwidmFsdWVzIiwiZmlsdGVyIiwiaWQiLCJpbmZ1cmFLZXkiLCJDSEFJTl9JTkZPIiwiZG9jcyIsImV4cGxvcmVyIiwiaW5mb0xpbmsiLCJsYWJlbCIsIm5hdGl2ZUN1cnJlbmN5IiwibmFtZSIsInN5bWJvbCIsImRlY2ltYWxzIiwidXJscyIsInVybCIsInVuZGVmaW5lZCIsImJyaWRnZSIsImJsb2NrRXhwbG9yZXJVcmxzIiwiZ2V0QWRkQ2hhaW5QYXJhbWV0ZXJzIiwiY2hhaW5JZCIsImNoYWluSW5mb3JtYXRpb24iLCJpc0V4dGVuZGVkQ2hhaW5JbmZvcm1hdGlvbiIsImNoYWluTmFtZSIsInJwY1VybHMiLCJwcm92aWRlciIsImV0aGVyZXVtIiwicHJvY2VzcyIsImVudiIsInBsYXRmb3JtIiwic3VwcG9ydGVkQ2hhaW5JZHMiLCJ1c2VTdGF0ZSIsImFkZHJlc3MiLCJzZXRBZGRyZXNzIiwiY2hhaW4iLCJ1c2VSZWYiLCJpc0xvZ291dCIsInNldGlzTG9nb3V0IiwibG9nT3V0IiwidXNlQ2FsbGJhY2siLCJoYW5kbGVBY2NvdW50c0NoYW5nZWQiLCJhY2NvdW50cyIsImlzVW5sb2NrZWQiLCJfbWV0YW1hc2siLCJ0aGVuIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVzZXJBZHJlc3MiLCJnZXRJdGVtIiwicmVsb2FkIiwiZ2V0QWNjb3VudCIsImN1cnJlbnQiLCJzZW5kIiwiY2F0Y2giLCJoYW5kbGVDaGFpbkNoYW5nZWQiLCJpbmNsdWRlcyIsImhhbmRsZVN3aXRjaENoYWluIiwiSGV4U3RyaW5nIiwicmVxdWVzdCIsIm1ldGhvZCIsInBhcmFtcyIsImdldENoYWluIiwiZ2V0TmV0d29yayIsInJlc3VsdF8iLCJ1c2VFZmZlY3QiLCJvbiIsInJlbW92ZUxpc3RlbmVyIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiYW1kTyIsIk8iLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJnZXRQcm90b3R5cGVPZiIsIm9iaiIsInQiLCJ2YWx1ZSIsIm1vZGUiLCJ0aGlzIiwibnMiLCJjcmVhdGUiLCJkZWYiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJlIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJubWQiLCJwYXRocyIsImNoaWxkcmVuIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==